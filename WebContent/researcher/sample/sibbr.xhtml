<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<ui:composition template="../template.xhtml">

	<ui:define name="content">
	

 	
 <div class="container" align="center" >	

 
 
<<<<<<< HEAD
 
=======
>>>>>>> f0ff07a022c89dd65f88413b599dc6ed952ff926
 <p:panel id="basic" header="Gerar dados para o SiBBr">
	
	<h:form id="formSibbr" >    
	
	
	
	<p:panelGrid columns="8" id="pnlF">
	
	
			<p:outputLabel value="Projeto:" />
				<p:selectOneMenu value="#{sampleMB.event.subproject.id}" effect="fold" editable="false">
           			<f:selectItem itemLabel="Selecione" itemValue="" />
           			<f:selectItems value="#{sampleMB.subProjectList}" var="item" itemValue="#{item.id}" itemLabel="#{item.subprojectTitle}" />
       			</p:selectOneMenu> 
			
			 <p:outputLabel value="Data Inicial: " />
             <p:calendar id="date" value="#{sampleMB.initialDate}" navigator="true" locale="pt" pattern="dd/MM/yyyy" mask="true" />  
              
             <p:outputLabel value="Data Final: " />
             <p:calendar id="date2" value="#{sampleMB.finalDate}" navigator="true" locale="pt" pattern="dd/MM/yyyy" mask="true" />  
              
              
             <p:commandButton value="Filtrar" icon="fa fa-check"
								actionListener="#{sampleMB.searchEvent()}"
								update=":formSibbr:tbl">
			</p:commandButton> 
                 
                
				 		</p:panelGrid>	 	
				 		
				 		<p:messages id="messages" autoUpdate="true" closable="true" />	
	
	
    <p:dataTable id="tbl" var="event" value="#{sampleMB.eventList}" selection="#{sampleMB.eventListSelect}" rowKey="#{event.id}"
                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                 paginator="true" rows="10" style="margin-bottom:20px;padding-top:20px; max-width: 850px; min-width: 550px"  
                 currentPageReportTemplate="[Página: {currentPage} de {totalPages} ]" rowsPerPageTemplate="10,50,100"
                 >
    
    
    	<p:column selectionMode="multiple" style="width:30px;"/>	
    
    	<p:column headerText="Nº do Campo">
            
            <h:outputText value="#{event.eventId}" />
        </p:column>
    	
       <p:column headerText="Data">   
       		               
            <h:outputText value="#{event.eventDate}">
               <f:convertDateTime pattern="dd/MM/yyyy" /> 
            </h:outputText>  
                     
        </p:column>
        
        <p:column headerText="Hora">
            <h:outputText value="#{event.eventTime}">
               <f:convertDateTime pattern="HH:mm"/> 
            </h:outputText>
        </p:column>
        
        <p:column headerText="Corpo d'água">
            
            <h:outputText value="#{event.waterBody.waterBody}" />
        </p:column>
        
        <p:column headerText="Protocolo">
            <h:outputText value="#{event.samplingProtocol.samplingProtocol}" />
        </p:column>
      
                     
       <p:column headerText="Esforço">
            <h:outputText value="#{event.sampleEffort}" />
        </p:column>        
                     
     </p:dataTable>
     
     <div style="padding-left: 700px;">
	  
	   <p:commandButton id="ep2" value="Gerar dados para o SiBBr" icon="fa fa-check"
								actionListener="#{sampleMB.exportarSibbr()}"
								update=":formSibbr:tbl"								
								oncomplete="PF('dlgConfirmacao').show();">
								
								<p:tooltip for="ep2" value="Gerar o Darwin Core Archive" trackMouse="true" />								
							</p:commandButton>    
	    
	  </div>  
     
      </h:form>  
     
     
   </p:panel>       
       
    
   </div>     
   
   <p:dialog header="Confirmar" widgetVar="dlgConfirmacao" modal="true"
			appendTo="@(body)" closable="false" draggable="true"
			resizable="false">
			<h:form>
				<p:messages id="messages" autoUpdate="true" closable="false" />
				<h:panelGrid columns="2">
					<p:commandButton value="Voltar" icon="fa fa-check"
						update=":formSibbr:tbl"
						oncomplete="PF('dlgConfirmacao').hide();"
						>
						
					</p:commandButton>
					
					<p:commandButton ajax="false" value="Fazer download do arquivo gerado" icon="fa fa-check" action="#{sampleMB.download()}" />
						
						
				</h:panelGrid>
			</h:form>
		</p:dialog>

<style type="text/css">
        .coluna1 {
            width: 100px;
        }
        .coluna2 {
            width: 700px;
        }
    </style>
		
	</ui:define>
</ui:composition>

    
</html>




